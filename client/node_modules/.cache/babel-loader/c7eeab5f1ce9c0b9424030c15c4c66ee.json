{"ast":null,"code":"var _jsxFileName = \"E:\\\\PROJECTS\\\\StackOverflowCloneREPO-master\\\\client\\\\src\\\\components\\\\body\\\\question\\\\Question.js\";\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { Link } from 'react-router-dom';\nimport { useSelector, useDispatch } from 'react-redux';\nimport \"./Question.css\";\nimport { AiOutlinePlus } from 'react-icons/ai';\nimport { MdDone } from 'react-icons/md';\n\nfunction Question(props) {\n  var _question$likes, _auth$user2, _question$likes2, _question$images, _question$images2, _question$tags, _auth$user3, _question$writer2;\n\n  const questionId = props.match.params.questionId;\n  const auth = useSelector(state => state.auth);\n  const token = useSelector(state => state.token);\n  const [photos, setphotos] = useState([]);\n  const [photosinput, setphotosinput] = useState('');\n  const [answeartext, setansweartext] = useState('');\n  const [question, setquestion] = useState({});\n  const [answears, setanswears] = useState([]);\n  const [reload, setreload] = useState(false);\n  const [comments, setcomments] = useState([]);\n  const [commentInput, setcommentInput] = useState(\"\");\n  useEffect(() => {\n    axios.get(`/api/question/${questionId}`).then(d => {\n      if (d.data.redirect) props.history.push(\"/\");else {\n        var _d$data;\n\n        setquestion(d === null || d === void 0 ? void 0 : (_d$data = d.data) === null || _d$data === void 0 ? void 0 : _d$data.question[0]);\n      }\n    });\n    axios.get(`/api/answear/fromquestion/${questionId}`).then(d => {\n      var _d$data2, _d$data2$answears;\n\n      return setanswears(d === null || d === void 0 ? void 0 : (_d$data2 = d.data) === null || _d$data2 === void 0 ? void 0 : (_d$data2$answears = _d$data2.answears) === null || _d$data2$answears === void 0 ? void 0 : _d$data2$answears.sort((a, b) => a.likes.length < b.likes.length ? 1 : b.likes.length < a.likes.length ? -1 : 0));\n    });\n    axios.get(`/api/comment/${questionId}`).then(d => {\n      setcomments(d.data.comments);\n    });\n  }, [token, questionId, auth, reload]);\n\n  const dropPhoto = i => {\n    let pushArray = [];\n\n    for (let y = 0; y < photos.length; y++) {\n      if (y != i) pushArray.push(photos[y]);\n    }\n\n    setphotos(pushArray);\n  };\n\n  const setphoto = () => {\n    if (photos.indexOf(photosinput) == -1 && photosinput.length) {\n      setphotos([...photos, photosinput]);\n      setphotosinput('');\n    }\n  };\n\n  const createAnswear = async () => {\n    if (answeartext.length > 0) {\n      const res = await axios.post('/api/answear/create', {\n        questionId,\n        photos,\n        answeartext\n      }, {\n        headers: {\n          Authorization: token\n        }\n      });\n\n      if (res.data.reload) {\n        setreload(!reload);\n        setphotosinput(\"\");\n        setansweartext(\"\");\n        setphotos([]);\n      }\n    }\n  };\n\n  const uploadPhoto = async e => {\n    e.preventDefault();\n\n    try {\n      const file = e.target.files[0];\n      if (!file) console.log({\n        err: \"No files were uploaded.\",\n        success: ''\n      });\n      if (file.size > 1024 * 1024) console.log({\n        err: \"Size too large.\",\n        success: ''\n      });\n      if (file.type !== 'image/jpeg' && file.type !== 'image/png' && file.mimetype !== 'image/jpg') console.log({\n        err: \"File format is incorrect.\",\n        success: ''\n      });\n      let formData = new FormData();\n      formData.append('file', file);\n      const res = await axios.post('/api/answear/uploadimage', formData, {\n        headers: {\n          'content-type': 'multipart/form-data',\n          Authorization: token\n        }\n      });\n      setphotos([...photos, res.data.url]);\n    } catch (err) {\n      console.log({\n        err: err.response.data.msg,\n        success: ''\n      });\n    }\n  };\n\n  const upVoteQ = async () => {\n    var _res$data;\n\n    const res = await axios.post(`/api/question/vote/${questionId}`, {}, {\n      headers: {\n        Authorization: token\n      }\n    });\n    if (res === null || res === void 0 ? void 0 : (_res$data = res.data) === null || _res$data === void 0 ? void 0 : _res$data.reload) setreload(!reload);\n  };\n\n  const upVoteA = async answearId => {\n    var _res$data2;\n\n    const res = await axios.post(`/api/answear/vote/${answearId}`, {}, {\n      headers: {\n        Authorization: token\n      }\n    });\n    if (res === null || res === void 0 ? void 0 : (_res$data2 = res.data) === null || _res$data2 === void 0 ? void 0 : _res$data2.reload) setreload(!reload);\n  };\n\n  const deleteAnswear = async del_id => {\n    var _res$data3;\n\n    const res = await axios.delete(`/api/answear/${del_id}`, {\n      headers: {\n        Authorization: token\n      }\n    });\n    if (res === null || res === void 0 ? void 0 : (_res$data3 = res.data) === null || _res$data3 === void 0 ? void 0 : _res$data3.removed) props.history.push(\"/\");\n  };\n\n  const deleteQuestion = async del_id => {\n    var _res$data4;\n\n    const res = await axios.delete(`/api/question/${del_id}`, {\n      headers: {\n        Authorization: token\n      }\n    });\n    if (res === null || res === void 0 ? void 0 : (_res$data4 = res.data) === null || _res$data4 === void 0 ? void 0 : _res$data4.removed) props.history.push(\"/\");\n  };\n\n  const isAnsweared = async () => {\n    var _question$writer, _auth$user;\n\n    if ((question === null || question === void 0 ? void 0 : (_question$writer = question.writer) === null || _question$writer === void 0 ? void 0 : _question$writer._id) == (auth === null || auth === void 0 ? void 0 : (_auth$user = auth.user) === null || _auth$user === void 0 ? void 0 : _auth$user._id) || (auth === null || auth === void 0 ? void 0 : auth.isAdmin)) {\n      var _res$data5;\n\n      const res = await axios.patch(`/api/question/setansweared/${question === null || question === void 0 ? void 0 : question._id}`, {}, {\n        headers: {\n          Authorization: token\n        }\n      });\n      if (res === null || res === void 0 ? void 0 : (_res$data5 = res.data) === null || _res$data5 === void 0 ? void 0 : _res$data5.reload) setreload(!reload);\n    }\n  };\n\n  const createComment = async () => {\n    if (commentInput.length) {\n      var _res$data6;\n\n      const res = await axios.post(`/api/comment/${question === null || question === void 0 ? void 0 : question._id}`, {\n        commentInput\n      }, {\n        headers: {\n          Authorization: token\n        }\n      });\n\n      if (res === null || res === void 0 ? void 0 : (_res$data6 = res.data) === null || _res$data6 === void 0 ? void 0 : _res$data6.reload) {\n        setreload(!reload);\n        setcommentInput(\"\");\n      }\n    }\n  };\n\n  const deleteComment = async id => {\n    var _res$data7;\n\n    const res = await axios.delete(`/api/comment/${id}`, {\n      headers: {\n        Authorization: token\n      }\n    });\n\n    if (res === null || res === void 0 ? void 0 : (_res$data7 = res.data) === null || _res$data7 === void 0 ? void 0 : _res$data7.reload) {\n      setreload(!reload);\n    }\n  };\n\n  const createReportOnQuestion = async () => {\n    var _res$data8;\n\n    const res = await axios.post(`/api/notifications`, {\n      questionId,\n      on: \"Question\",\n      type: \"Report\",\n      text: \"Report on question\"\n    }, {\n      headers: {\n        Authorization: token\n      }\n    });\n\n    if (res === null || res === void 0 ? void 0 : (_res$data8 = res.data) === null || _res$data8 === void 0 ? void 0 : _res$data8.notification) {\n      alert(\"Report was sent!\");\n    }\n  };\n\n  return question._id ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"questionComponent\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"questionComponentBody\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"questionComponentBodyLikes\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"questionComponentBodyIsAnsweared \" + ((question === null || question === void 0 ? void 0 : question.answered) ? \"yes\" : \"\"),\n    onClick: () => isAnsweared(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(MdDone, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"questionComponentBodyLikesBtn \" + ((question === null || question === void 0 ? void 0 : (_question$likes = question.likes) === null || _question$likes === void 0 ? void 0 : _question$likes.indexOf(auth === null || auth === void 0 ? void 0 : (_auth$user2 = auth.user) === null || _auth$user2 === void 0 ? void 0 : _auth$user2._id)) != -1 ? \"Liked\" : \"\"),\n    onClick: () => upVoteQ(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(AiOutlinePlus, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 13\n    }\n  }, question === null || question === void 0 ? void 0 : (_question$likes2 = question.likes) === null || _question$likes2 === void 0 ? void 0 : _question$likes2.length)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"questionComponentBodyExact\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"questionComponentBodyExactTitle\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 13\n    }\n  }, question === null || question === void 0 ? void 0 : question.title), /*#__PURE__*/React.createElement(\"pre\", {\n    className: \"questionComponentBodyExactDescription\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 13\n    }\n  }, question === null || question === void 0 ? void 0 : question.description), (question === null || question === void 0 ? void 0 : (_question$images = question.images) === null || _question$images === void 0 ? void 0 : _question$images.length) ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"questionComponentBodyExactImages\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 15\n    }\n  }, question === null || question === void 0 ? void 0 : (_question$images2 = question.images) === null || _question$images2 === void 0 ? void 0 : _question$images2.map((t, i) => /*#__PURE__*/React.createElement(\"img\", {\n    key: i,\n    src: t,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 50\n    }\n  }))) : null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"questionComponentBodyExactTags\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 13\n    }\n  }, question === null || question === void 0 ? void 0 : (_question$tags = question.tags) === null || _question$tags === void 0 ? void 0 : _question$tags.map((t, i) => /*#__PURE__*/React.createElement(\"span\", {\n    key: i,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 46\n    }\n  }, t))), auth.user.role || (auth === null || auth === void 0 ? void 0 : (_auth$user3 = auth.user) === null || _auth$user3 === void 0 ? void 0 : _auth$user3._id) == (question === null || question === void 0 ? void 0 : (_question$writer2 = question.writer) === null || _question$writer2 === void 0 ? void 0 : _question$writer2._id) ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"questionComponentBodyExactControl\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"delete\",\n    onClick: () => deleteQuestion(questionId),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 17\n    }\n  }, \"Delete\"), /*#__PURE__*/React.createElement(Link, {\n    className: \"edit\",\n    to: \"/question/\" + questionId + \"/edit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 17\n    }\n  }, \"Edit\")) : auth.isLogged ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"questionComponentBodyExactControl\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"delete\",\n    onClick: () => createReportOnQuestion(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 21\n    }\n  }, \"Report\")) : null)), auth.isLogged || comments.length ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"comments_section\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 232,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"comments_section_title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 13\n    }\n  }, \"Comments\"), auth.isLogged ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"comments_section_control\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    value: commentInput,\n    onChange: e => setcommentInput(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 236,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => createComment(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 237,\n      columnNumber: 17\n    }\n  }, \"Create comment\")) : null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"comments_map\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 240,\n      columnNumber: 13\n    }\n  }, comments.map((c, i) => /*#__PURE__*/React.createElement(\"div\", {\n    key: i,\n    className: \"comment\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 241,\n      columnNumber: 39\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 241,\n      columnNumber: 72\n    }\n  }, c.description), c.writer == auth.user._id || auth.isAdmin ? /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => deleteComment(c._id),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 243,\n      columnNumber: 19\n    }\n  }, \"X\") : null)))) : null, auth.isLogged ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"inputForm\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 250,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"inputFormTitle\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 251,\n      columnNumber: 11\n    }\n  }, \"Create answer\"), /*#__PURE__*/React.createElement(\"textarea\", {\n    className: \"DescriptionInput\",\n    placeholder: \"Body\",\n    value: answeartext,\n    onChange: e => setansweartext(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 252,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"imagesMap\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 253,\n      columnNumber: 11\n    }\n  }, photos.map((src, index) => /*#__PURE__*/React.createElement(\"img\", {\n    key: index,\n    src: src,\n    onClick: () => dropPhoto(index),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 254,\n      columnNumber: 41\n    }\n  }))), photos.length < 6 ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 257,\n      columnNumber: 13\n    }\n  }, \"Choose PNG/JPG/JPEG\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"file\",\n    name: \"file\",\n    id: \"file_up\",\n    onChange: uploadPhoto,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 258,\n      columnNumber: 13\n    }\n  })) : null, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 259,\n      columnNumber: 11\n    }\n  }, photos.length < 6 ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"fileInput\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 260,\n      columnNumber: 34\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    placeholder: \"Link on photo\",\n    onChange: e => setphotosinput(e.target.value),\n    value: photosinput,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 261,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => setphoto(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 262,\n      columnNumber: 15\n    }\n  }, \"Set photo\")) : null), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"create\",\n    onClick: () => createAnswear(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 264,\n      columnNumber: 11\n    }\n  }, \"Create Answer\")) : null, (answears === null || answears === void 0 ? void 0 : answears.length) && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"answearsMap\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 270,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"answearsMapTitle\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 271,\n      columnNumber: 13\n    }\n  }, \"Answers\"), answears === null || answears === void 0 ? void 0 : answears.map((a, i) => {\n    var _a$likes, _auth$user4, _a$likes2;\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"answear\",\n      key: i,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 273,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"answearBody\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 274,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"answearVote\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 275,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"answearVote \" + ((a === null || a === void 0 ? void 0 : (_a$likes = a.likes) === null || _a$likes === void 0 ? void 0 : _a$likes.indexOf(auth === null || auth === void 0 ? void 0 : (_auth$user4 = auth.user) === null || _auth$user4 === void 0 ? void 0 : _auth$user4._id)) != -1 ? \"Liked\" : \"\"),\n      onClick: () => upVoteA(a._id),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 276,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(AiOutlinePlus, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 277,\n        columnNumber: 23\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"answearVoteLength\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 279,\n        columnNumber: 21\n      }\n    }, a === null || a === void 0 ? void 0 : (_a$likes2 = a.likes) === null || _a$likes2 === void 0 ? void 0 : _a$likes2.length)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"answearMainContent\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 281,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 282,\n        columnNumber: 21\n      }\n    }, a.description), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"answearMainContentImgMap\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 283,\n        columnNumber: 21\n      }\n    }, a.images.map((i, ii) => /*#__PURE__*/React.createElement(\"img\", {\n      key: ii,\n      src: i,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 283,\n        columnNumber: 88\n      }\n    }))))), a.writer._id == auth.user._id || auth.isAdmin ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"answearMainContentControl\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 289,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"delete\",\n      onClick: () => deleteAnswear(a._id),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 290,\n        columnNumber: 23\n      }\n    }, \"Delete\"), /*#__PURE__*/React.createElement(Link, {\n      to: \"/answear/\" + a._id + \"/edit\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 291,\n        columnNumber: 23\n      }\n    }, \"Edit\")) : null);\n  }))) : /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 301,\n      columnNumber: 7\n    }\n  }, \" Loading\");\n}\n\nexport default Question;","map":{"version":3,"sources":["E:/PROJECTS/StackOverflowCloneREPO-master/client/src/components/body/question/Question.js"],"names":["React","useState","useEffect","axios","Link","useSelector","useDispatch","AiOutlinePlus","MdDone","Question","props","questionId","match","params","auth","state","token","photos","setphotos","photosinput","setphotosinput","answeartext","setansweartext","question","setquestion","answears","setanswears","reload","setreload","comments","setcomments","commentInput","setcommentInput","get","then","d","data","redirect","history","push","sort","a","b","likes","length","dropPhoto","i","pushArray","y","setphoto","indexOf","createAnswear","res","post","headers","Authorization","uploadPhoto","e","preventDefault","file","target","files","console","log","err","success","size","type","mimetype","formData","FormData","append","url","response","msg","upVoteQ","upVoteA","answearId","deleteAnswear","del_id","delete","removed","deleteQuestion","isAnsweared","writer","_id","user","isAdmin","patch","createComment","deleteComment","id","createReportOnQuestion","on","text","notification","alert","answered","title","description","images","map","t","tags","role","isLogged","value","c","src","index","ii"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport axios from 'axios'\nimport { Link } from 'react-router-dom'\nimport { useSelector, useDispatch } from 'react-redux'\nimport \"./Question.css\"\nimport { AiOutlinePlus } from 'react-icons/ai';\nimport { MdDone } from 'react-icons/md';\nfunction Question(props) {\n  const questionId = props.match.params.questionId;\n  const auth = useSelector(state => state.auth)\n  const token = useSelector(state => state.token)\n  const [photos, setphotos] = useState([])\n\n  const [photosinput, setphotosinput] = useState('')\n  const [answeartext, setansweartext] = useState('')\n  const [question, setquestion] = useState({})\n  const [answears, setanswears] = useState([])\n  const [reload, setreload] = useState(false)\n\n  const [comments, setcomments] = useState([])\n  const [commentInput, setcommentInput] = useState(\"\")\n\n\n  useEffect(() => {\n\n    axios.get(`/api/question/${questionId}`).then(\n      d => {\n        if (d.data.redirect)\n          props.history.push(\"/\")\n        else {\n          setquestion(d?.data?.question[0])\n        }\n      }\n    )\n\n    axios.get(`/api/answear/fromquestion/${questionId}`).then(\n      d => setanswears(d?.data?.answears?.sort((a, b) => (a.likes.length < b.likes.length) ? 1 : ((b.likes.length < a.likes.length) ? -1 : 0))\n      )\n    )\n    axios.get(`/api/comment/${questionId}`).then(\n      d => { setcomments(d.data.comments) }\n    )\n  }, [token, questionId, auth, reload])\n\n\n  const dropPhoto = i => {\n    let pushArray = []\n    for (let y = 0; y < photos.length; y++) {\n      if (y != i)\n        pushArray.push(photos[y])\n    }\n    setphotos(pushArray)\n  }\n\n  const setphoto = () => {\n    if (photos.indexOf(photosinput) == -1 && photosinput.length) {\n      setphotos([...photos, photosinput])\n      setphotosinput('')\n    }\n  }\n  const createAnswear = async () => {\n    if (answeartext.length > 0) {\n      const res = await axios.post('/api/answear/create', { questionId, photos, answeartext }, {\n        headers: { Authorization: token }\n      })\n      if (res.data.reload) {\n        setreload(!reload)\n        setphotosinput(\"\")\n        setansweartext(\"\")\n        setphotos([])\n      }\n    }\n  }\n\n  const uploadPhoto = async (e) => {\n    e.preventDefault()\n    try {\n      const file = e.target.files[0]\n\n      if (!file) console.log({ err: \"No files were uploaded.\", success: '' })\n\n      if (file.size > 1024 * 1024)\n        console.log({ err: \"Size too large.\", success: '' })\n\n      if (file.type !== 'image/jpeg' && file.type !== 'image/png' && file.mimetype !== 'image/jpg')\n        console.log({ err: \"File format is incorrect.\", success: '' })\n\n      let formData = new FormData()\n      formData.append('file', file)\n\n      const res = await axios.post('/api/answear/uploadimage', formData, {\n        headers: { 'content-type': 'multipart/form-data', Authorization: token }\n      })\n\n      setphotos([...photos, res.data.url])\n\n    } catch (err) {\n      console.log({ err: err.response.data.msg, success: '' })\n    }\n  }\n\n  const upVoteQ = async () => {\n    const res = await axios.post(`/api/question/vote/${questionId}`, {}, {\n      headers: { Authorization: token }\n    })\n    if (res?.data?.reload)\n      setreload(!reload)\n  }\n\n  const upVoteA = async (answearId) => {\n    const res = await axios.post(`/api/answear/vote/${answearId}`, {}, {\n      headers: { Authorization: token }\n    })\n    if (res?.data?.reload)\n      setreload(!reload)\n  }\n\n  const deleteAnswear = async (del_id) => {\n    const res = await axios.delete(`/api/answear/${del_id}`, {\n      headers: { Authorization: token }\n    })\n    if (res?.data?.removed)\n      props.history.push(\"/\")\n\n  }\n\n\n  const deleteQuestion = async (del_id) => {\n    const res = await axios.delete(`/api/question/${del_id}`, {\n      headers: { Authorization: token }\n    })\n    if (res?.data?.removed)\n      props.history.push(\"/\")\n  }\n  const isAnsweared = async () => {\n    if (question?.writer?._id == auth?.user?._id || auth?.isAdmin) {\n      const res = await axios.patch(`/api/question/setansweared/${question?._id}`, {}, {\n        headers: { Authorization: token }\n      })\n      if (res?.data?.reload)\n        setreload(!reload)\n    }\n  }\n  const createComment = async () => {\n    if (commentInput.length) {\n      const res = await axios.post(`/api/comment/${question?._id}`, { commentInput }, {\n        headers: { Authorization: token }\n      })\n      if (res?.data?.reload) {\n        setreload(!reload)\n        setcommentInput(\"\")\n      }\n    }\n  }\n\n  const deleteComment = async (id) => {\n    const res = await axios.delete(`/api/comment/${id}`, {\n      headers: { Authorization: token }\n    })\n    if (res?.data?.reload) {\n      setreload(!reload)\n    }\n  }\n\n  const createReportOnQuestion = async () => {\n    const res = await axios.post(`/api/notifications`, {\n      questionId,\n      on: \"Question\",\n      type: \"Report\",\n      text: \"Report on question\"\n    }, {\n      headers: { Authorization: token }\n    })\n    if (res?.data?.notification) {\n      alert(\"Report was sent!\")\n    }\n  }\n  return (\n    question._id ?\n      <div className=\"questionComponent\">\n        <div className=\"questionComponentBody\">\n\n          <div className=\"questionComponentBodyLikes\">\n            <button className={\"questionComponentBodyIsAnsweared \" + (question?.answered ? \"yes\" : \"\")} onClick={() => isAnsweared()}>\n              <MdDone />\n            </button>\n            <button className={\"questionComponentBodyLikesBtn \" + (question?.likes?.indexOf(auth?.user?._id) != -1 ? \"Liked\" : \"\")} onClick={() => upVoteQ()}>\n              <AiOutlinePlus />\n            </button>\n            <div>{question?.likes?.length}</div>\n          </div>\n          <div className=\"questionComponentBodyExact\">\n\n            <div className=\"questionComponentBodyExactTitle\">\n              {question?.title}\n            </div>\n\n\n            <pre className=\"questionComponentBodyExactDescription\">\n              {question?.description}\n            </pre>\n            {question?.images?.length ?\n              <div className=\"questionComponentBodyExactImages\">\n                {question?.images?.map((t, i) => <img key={i} src={t}></img>)}\n\n              </div> : null\n            }\n            <div className=\"questionComponentBodyExactTags\">\n              {question?.tags?.map((t, i) => <span key={i}>{t}</span>)}\n            </div>\n\n            {(auth.user.role || auth?.user?._id == question?.writer?._id) ?\n\n              <div className=\"questionComponentBodyExactControl\">\n                <button className=\"delete\" onClick={() => deleteQuestion(questionId)}>\n                  Delete\n            </button>\n                <Link className=\"edit\" to={\"/question/\" + questionId + \"/edit\"}>Edit</Link>\n              </div> : (\n                auth.isLogged ?\n                  <div className=\"questionComponentBodyExactControl\">\n                    <button className=\"delete\" onClick={() => createReportOnQuestion()}>\n                      Report\n                    </button>\n                  </div> :\n                  null\n              )\n            }\n          </div>\n        </div>\n        {(auth.isLogged || comments.length) ?\n          <div className=\"comments_section\">\n            <div className=\"comments_section_title\">Comments</div>\n            {auth.isLogged ?\n              <div className=\"comments_section_control\">\n                <input value={commentInput} onChange={e => setcommentInput(e.target.value)}></input>\n                <button onClick={() => createComment()}>Create comment</button>\n              </div> : null\n            }\n            <div className=\"comments_map\">\n              {comments.map((c, i) => <div key={i} className=\"comment\"><div>{c.description}</div>\n                {(c.writer == auth.user._id || auth.isAdmin) ?\n                  <button onClick={() => deleteComment(c._id)}>X</button> : null\n                }\n              </div>)}\n            </div>\n          </div> : null\n        }\n        {auth.isLogged ?\n        <div className=\"inputForm\">\n          <div className=\"inputFormTitle\">Create answer</div>\n          <textarea className=\"DescriptionInput\" placeholder=\"Body\" value={answeartext} onChange={e => setansweartext(e.target.value)}></textarea>\n          <div className=\"imagesMap\">\n            {photos.map((src, index) => <img key={index} src={src} onClick={() => dropPhoto(index)} />)}\n          </div>\n          {photos.length < 6 ? <>\n            <label>Choose PNG/JPG/JPEG</label>\n            <input type=\"file\" name=\"file\" id=\"file_up\" onChange={uploadPhoto} /></> : null}\n          <div>\n            {photos.length < 6 ? <div className=\"fileInput\">\n              <input placeholder=\"Link on photo\" onChange={e => setphotosinput(e.target.value)} value={photosinput} />\n              <button onClick={() => setphoto()}>Set photo</button></div> : null}\n          </div>\n          <button className=\"create\" onClick={() => createAnswear()}>Create Answer</button>\n        </div>:null}\n\n\n\n        {answears?.length &&\n          <div className=\"answearsMap\">\n            <div className=\"answearsMapTitle\">Answers</div>\n            {answears?.map((a, i) =>\n              <div className=\"answear\" key={i}>\n                <div className=\"answearBody\">\n                  <div className=\"answearVote\">\n                    <button className={\"answearVote \" + (a?.likes?.indexOf(auth?.user?._id) != -1 ? \"Liked\" : \"\")} onClick={() => upVoteA(a._id)}>\n                      <AiOutlinePlus />\n                    </button>\n                    <div className=\"answearVoteLength\">{a?.likes?.length}</div>\n                  </div>\n                  <div className=\"answearMainContent\">\n                    <div>{a.description}</div>\n                    <div className=\"answearMainContentImgMap\">{a.images.map((i, ii) => <img key={ii} src={i}></img>)}</div>\n                  </div>\n                </div>\n\n                {\n                  (a.writer._id == auth.user._id || auth.isAdmin) ?\n                    <div className=\"answearMainContentControl\">\n                      <button className=\"delete\" onClick={() => deleteAnswear(a._id)}>Delete</button>\n                      <Link to={\"/answear/\" + a._id + \"/edit\"}>Edit</Link>\n                    </div> : null\n                }\n\n              </div>\n            )}\n\n          </div>\n        }\n      </div> :\n      <div> Loading</div>\n  )\n}\n\nexport default Question"]},"metadata":{},"sourceType":"module"}