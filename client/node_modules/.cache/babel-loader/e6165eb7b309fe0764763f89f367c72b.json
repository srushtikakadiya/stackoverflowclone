{"ast":null,"code":"var _jsxFileName = \"E:\\\\PROJECTS\\\\StackOverflowCloneREPO-master\\\\client\\\\src\\\\components\\\\body\\\\profile\\\\EditUser.js\";\nimport React, { useState, useEffect } from 'react';\nimport { useParams, useHistory } from 'react-router-dom';\nimport { useSelector } from 'react-redux';\nimport axios from 'axios';\nimport \"./EditUser.css\";\n\nfunction EditUser(props) {\n  const {\n    id\n  } = useParams();\n  const history = useHistory();\n  const [editUser, setEditUser] = useState([]);\n  const auth = useSelector(state => state.auth);\n  const {\n    user,\n    isAdmin\n  } = auth;\n  const token = useSelector(state => state.token);\n  const [checkAdmin, setCheckAdmin] = useState(false);\n  const [num, setNum] = useState(0);\n  useEffect(() => {\n    if (isAdmin) {\n      axios.post('/api/users/admin/user', {\n        id\n      }, {\n        headers: {\n          Authorization: token\n        }\n      }).then(data => {\n        setEditUser(data.data[0]);\n        setCheckAdmin(data.data[0].role === 1 ? true : false);\n      });\n    } else {\n      props.history.push('/');\n    }\n  }, [id, props.history]);\n\n  const handleUpdate = async () => {\n    try {\n      if (num % 2 !== 0 && user._id !== id) {\n        const res = await axios.patch(`/api/users/update_role/${editUser._id}`, {\n          role: checkAdmin ? 1 : 0\n        }, {\n          headers: {\n            Authorization: token\n          }\n        });\n        setNum(0);\n      }\n    } catch (err) {}\n  };\n\n  const handleCheck = () => {\n    setCheckAdmin(!checkAdmin);\n    setNum(num + 1);\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"edit_user\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => history.goBack(),\n    className: \"go_back\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"fas fa-long-arrow-alt-left\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 17\n    }\n  }), \" Go Back\"), /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 13\n    }\n  }, \"Edit User\"), /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"name\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 13\n    }\n  }, \"Name\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    name: \"name\",\n    defaultValue: editUser.name,\n    disabled: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"email\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 13\n    }\n  }, \"Email\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"email\",\n    name: \"email\",\n    defaultValue: editUser.email,\n    disabled: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 13\n    }\n  }), editUser._id != auth.user._id && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"checkbox\",\n    id: \"isAdmin\",\n    checked: checkAdmin,\n    onChange: handleCheck,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"isAdmin\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 21\n    }\n  }, \"isAdmin\")), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: handleUpdate,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 13\n    }\n  }, \"Update\"));\n}\n\nexport default EditUser;","map":{"version":3,"sources":["E:/PROJECTS/StackOverflowCloneREPO-master/client/src/components/body/profile/EditUser.js"],"names":["React","useState","useEffect","useParams","useHistory","useSelector","axios","EditUser","props","id","history","editUser","setEditUser","auth","state","user","isAdmin","token","checkAdmin","setCheckAdmin","num","setNum","post","headers","Authorization","then","data","role","push","handleUpdate","_id","res","patch","err","handleCheck","goBack","name","email"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport { useParams, useHistory } from 'react-router-dom'\nimport { useSelector } from 'react-redux'\nimport axios from 'axios'\nimport \"./EditUser.css\"\n\nfunction EditUser(props) {\n    const { id } = useParams()\n    const history = useHistory()\n    const [editUser, setEditUser] = useState([])\n    const auth = useSelector(state => state.auth)\n    const { user, isAdmin } = auth\n\n    const token = useSelector(state => state.token)\n\n    const [checkAdmin, setCheckAdmin] = useState(false)\n    const [num, setNum] = useState(0)\n    useEffect(() => {\n        if (isAdmin) {\n            axios.post('/api/users/admin/user', { id }, {\n                headers: { Authorization: token }\n            }).then(data => {\n                setEditUser(data.data[0]);\n                setCheckAdmin(data.data[0].role === 1 ? true : false)\n            })\n        }\n        else {\n            props.history.push('/')\n        }\n    }, [id, props.history])\n\n    const handleUpdate = async () => {\n        try {\n            if (num % 2 !== 0 && user._id !== id) {\n                const res = await axios.patch(`/api/users/update_role/${editUser._id}`, {\n                    role: checkAdmin ? 1 : 0\n                }, {\n                    headers: { Authorization: token }\n                })\n\n                setNum(0)\n            }\n        } catch (err) {\n        }\n    }\n\n    const handleCheck = () => {\n\n        setCheckAdmin(!checkAdmin)\n        setNum(num + 1)\n    }\n\n    return (\n        <div className=\"edit_user\">\n            <button onClick={() => history.goBack()} className=\"go_back\">\n                <i className=\"fas fa-long-arrow-alt-left\"></i> Go Back\n                </button>\n            <h2>Edit User</h2>\n\n            <label htmlFor=\"name\">Name</label>\n            <input type=\"text\" name=\"name\" defaultValue={editUser.name} disabled />\n\n            <label htmlFor=\"email\">Email</label>\n            <input type=\"email\" name=\"email\" defaultValue={editUser.email} disabled />\n            {editUser._id != auth.user._id &&\n                <div className=\"form-group\">\n                    <input type=\"checkbox\" id=\"isAdmin\" checked={checkAdmin}\n                        onChange={handleCheck} />\n                    <label htmlFor=\"isAdmin\">isAdmin</label>\n                </div>\n            }\n            <button onClick={handleUpdate}>Update</button>\n        </div>\n    )\n}\n\nexport default EditUser\n"]},"metadata":{},"sourceType":"module"}